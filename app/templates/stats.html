{% extends "base.html" %}

{% block title %}Stats - Trader Journal{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Trading Stats</h2>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <h3>Total Trades</h3>
        <div class="stat-value">{{ stats.total_trades }}</div>
        <p class="stat-label">All trades</p>
    </div>

    <div class="stat-card">
        <h3>Closed Trades</h3>
        <div class="stat-value">{{ stats.closed_trades }}</div>
        <p class="stat-label">Closed positions</p>
    </div>

    <div class="stat-card">
        <h3>Open Trades</h3>
        <div class="stat-value">{{ stats.open_trades }}</div>
        <p class="stat-label">Open positions</p>
    </div>

    <div class="stat-card highlight">
        <h3>Total P&amp;L</h3>
        <div class="stat-value {% if stats.total_pnl > 0 %}positive{% elif stats.total_pnl < 0 %}negative{% endif %}">
            ${{ stats.total_pnl | format_decimal }}
        </div>
        <p class="stat-label">Net profit/loss</p>
    </div>
</div>

<div class="stats-grid">
    <div class="stat-card success">
        <h3>Winning Trades</h3>
        <div class="stat-value">{{ stats.winning_trades }}</div>
        <p class="stat-label">Profitable trades</p>
    </div>

    <div class="stat-card danger">
        <h3>Losing Trades</h3>
        <div class="stat-value">{{ stats.losing_trades }}</div>
        <p class="stat-label">Losing trades</p>
    </div>

    <div class="stat-card highlight">
        <h3>Win Rate</h3>
        <div class="stat-value">{{ stats.winrate }}%</div>
        <p class="stat-label">Win percentage</p>
    </div>
</div>

<div class="card">
    <h3>Analysis</h3>
    <div class="analysis">
        {% if stats.closed_trades > 0 %}
            <p>
                Out of <strong>{{ stats.closed_trades }}</strong> closed trades,
                <strong>{{ stats.winning_trades }}</strong> were winners and
                <strong>{{ stats.losing_trades }}</strong> were losers.
            </p>
            <p>
                Your win rate is <strong>{{ stats.winrate }}%</strong>.
                {% if stats.winrate >= 50 %}
                    Keep the edge.
                {% else %}
                    Focus on refining your setups.
                {% endif %}
            </p>
            <p>
                Total P&amp;L:
                <strong class="{% if stats.total_pnl > 0 %}positive{% elif stats.total_pnl < 0 %}negative{% endif %}">
                    ${{ stats.total_pnl | format_decimal }}
                </strong>
            </p>
        {% else %}
            <p>No closed trades yet. Log your first trades to see analysis here.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
