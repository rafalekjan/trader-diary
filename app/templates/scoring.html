{% extends "base.html" %}
{% block title %}Scoring{% endblock %}
{% block content %}
<div class="page-header">
    <div>
        <h2>Scoring</h2>
        <p class="page-subtitle">Scoring framework based on market context. Migration starts from SPY.</p>
    </div>
</div>

<form id="scoring-form" class="card analysis-builder scoring-builder" autocomplete="off">
    <div class="analysis-section">
        <div class="scoring-header-row">
            <h3>SPY</h3>
            <div class="scoring-header-summary">
                <div><strong>TOTAL SCORE:</strong> <span id="scoring-total-score">0 / 25</span></div>
                <div><strong>Interpretation:</strong> <span id="scoring-interpretation">Observation only</span></div>
            </div>
        </div>

        <div class="analysis-subsection">
            <h4>1. Direction</h4>
            <div class="scoring-stage-grid">
                <div class="form-group">
                    <label>Bias</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_bias" value="bullish">
                            <span class="checkbox-text">Bullish</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_bias" value="bearish">
                            <span class="checkbox-text">Bearish</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_bias" value="neutral">
                            <span class="checkbox-text">Neutral</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Market Regime</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_regime" value="trending">
                            <span class="checkbox-text">Trending</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_regime" value="ranging">
                            <span class="checkbox-text">Ranging</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_regime" value="volatile">
                            <span class="checkbox-text">Volatile/Distribution</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Structure</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_structure" value="hh_hl">
                            <span class="checkbox-text">HH/HL</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_structure" value="ll_lh">
                            <span class="checkbox-text">LL/LH</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_structure" value="mixed">
                            <span class="checkbox-text">Mixed</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>VWAP</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_vwap" value="above">
                            <span class="checkbox-text">Above</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_vwap" value="below">
                            <span class="checkbox-text">Below</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="analysis-subsection">
            <h4>2. Strength</h4>
            <div class="scoring-stage-grid">
                <div class="form-group">
                    <label for="sc_spy_rate">Rate</label>
                    <input id="sc_spy_rate" name="sc_spy_rate" type="text" placeholder="Rate">
                </div>
                <div class="form-group">
                    <label>Volume confirmation</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="checkbox" name="sc_spy_volume_gt_20d">
                            <span class="checkbox-text">Volume &gt; 20D avg</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="sc_spy_volume_expansion">
                            <span class="checkbox-text">Volume expansion</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>VIX</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_vix_trend" value="falling">
                            <span class="checkbox-text">Falling</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_vix_trend" value="rising">
                            <span class="checkbox-text">Rising</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_vix_trend" value="flat">
                            <span class="checkbox-text">Flat</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>VIX level</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_vix_level" value="lt20">
                            <span class="checkbox-text">&lt;20</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_vix_level" value="20_25">
                            <span class="checkbox-text">20-25</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_vix_level" value="gt25">
                            <span class="checkbox-text">&gt;25</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Breadth</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_breadth" value="strong">
                            <span class="checkbox-text">Strong</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_breadth" value="neutral">
                            <span class="checkbox-text">Neutral</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_breadth" value="weak">
                            <span class="checkbox-text">Weak</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="analysis-subsection">
            <h4>3. Location</h4>
            <div class="scoring-stage-grid">
                <div class="form-group">
                    <label>Location</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_location" value="at_resistance">
                            <span class="checkbox-text">At resistance</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_location" value="at_support">
                            <span class="checkbox-text">At support</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_location" value="mid_range">
                            <span class="checkbox-text">Mid-range</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_location" value="breaking_range">
                            <span class="checkbox-text">Breaking range</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Room to move</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_room" value="large">
                            <span class="checkbox-text">Large</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_room" value="limited">
                            <span class="checkbox-text">Limited</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_room" value="none">
                            <span class="checkbox-text">None</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>SPY behavior</label>
                    <div class="checkbox-group scoring-option-grid scoring-option-grid-2">
                        <label class="checkbox-label">
                            <input type="checkbox" name="sc_spy_behavior_above_20_50">
                            <span class="checkbox-text">Above 20/50</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="sc_spy_behavior_above_200">
                            <span class="checkbox-text">Above 200</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_behavior_trend" value="higher_lows">
                            <span class="checkbox-text">Higher lows intact</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_behavior_trend" value="lower_highs">
                            <span class="checkbox-text">Lower highs intact</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="sc_spy_behavior_trend" value="none" checked>
                            <span class="checkbox-text">No clear trend signal</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="sc_spy_behavior_pullback_in_progress">
                            <span class="checkbox-text">Pullback in progress</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="sc_spy_behavior_compression">
                            <span class="checkbox-text">Compression</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="sc_spy_behavior_expansion_up">
                            <span class="checkbox-text">Price expansion up</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="sc_spy_behavior_expansion_down">
                            <span class="checkbox-text">Price expansion down</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="analysis-subsection">
            <h4>Summary</h4>
            <div class="form-group">
                <label for="sc_spy_summary">SPY summary</label>
                <textarea id="sc_spy_summary" name="sc_spy_summary" rows="3" placeholder="Short SPY context summary..."></textarea>
            </div>
        </div>
    </div>

    <div class="analysis-section">
        <h3>Akcja (1D)</h3>

        <div class="analysis-subsection">
            <h4>A. Market Context (SPY-linked)</h4>
            <div class="scoring-stage-grid">
                <div class="form-group">
                    <label for="ticker">Ticker</label>
                    <input id="ticker" name="ticker" type="text" placeholder="RIOT">
                </div>
                <div class="form-group">
                    <label>SPY alignment</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_spy_alignment" value="Aligned">
                            <span class="checkbox-text">Aligned</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_spy_alignment" value="Diverging">
                            <span class="checkbox-text">Diverging</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_spy_alignment" value="Opposite">
                            <span class="checkbox-text">Opposite</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Macro wind</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_macro_wind" value="Tailwind">
                            <span class="checkbox-text">Tailwind</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_macro_wind" value="Neutral">
                            <span class="checkbox-text">Neutral</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_macro_wind" value="Headwind">
                            <span class="checkbox-text">Headwind</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="analysis-subsection">
            <h4>B. Direction &amp; Relative Strength</h4>
            <div class="scoring-stage-grid">
                <div class="form-group">
                    <label>Bias</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_bias" value="Bullish">
                            <span class="checkbox-text">Bullish</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_bias" value="Bearish">
                            <span class="checkbox-text">Bearish</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_bias" value="Neutral">
                            <span class="checkbox-text">Neutral</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Relative vs SPY</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_relative_vs_spy" value="Strong vs SPY">
                            <span class="checkbox-text">Strong vs SPY</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_relative_vs_spy" value="Weak vs SPY">
                            <span class="checkbox-text">Weak vs SPY</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_relative_vs_spy" value="Neutral">
                            <span class="checkbox-text">Neutral</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>RS state</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_rs_state" value="Improving">
                            <span class="checkbox-text">Improving</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_rs_state" value="Stable">
                            <span class="checkbox-text">Stable</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_rs_state" value="Deteriorating">
                            <span class="checkbox-text">Deteriorating</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="d1_rate">Rate (0-100)</label>
                    <input id="d1_rate" name="d1_rate" type="text" placeholder="Rate">
                </div>
            </div>
        </div>

        <div class="analysis-subsection">
            <h4>C. Trend &amp; Structure (1D Quality)</h4>
            <div class="scoring-stage-grid">
                <div class="form-group">
                    <label>Structure</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_structure" value="HH/HL">
                            <span class="checkbox-text">HH/HL</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_structure" value="LL/LH">
                            <span class="checkbox-text">LL/LH</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_structure" value="Mixed">
                            <span class="checkbox-text">Mixed</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Trend state</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_trend_state" value="Intact">
                            <span class="checkbox-text">Intact</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_trend_state" value="Weakening">
                            <span class="checkbox-text">Weakening</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_trend_state" value="Broken">
                            <span class="checkbox-text">Broken</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Trend quality</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_trend_quality" value="Clean">
                            <span class="checkbox-text">Clean</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_trend_quality" value="Acceptable">
                            <span class="checkbox-text">Acceptable</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_trend_quality" value="Choppy">
                            <span class="checkbox-text">Choppy</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Phase</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_phase" value="Impulse">
                            <span class="checkbox-text">Impulse</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_phase" value="Pullback">
                            <span class="checkbox-text">Pullback</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_phase" value="Base">
                            <span class="checkbox-text">Base</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>200 SMA</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_200_sma" value="Above">
                            <span class="checkbox-text">Above</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_200_sma" value="Below">
                            <span class="checkbox-text">Below</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="analysis-subsection">
            <h4>D. Context Risk (1D only)</h4>
            <div class="scoring-stage-grid">
                <div class="form-group">
                    <label>Gap risk</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_gap_risk" value="Low">
                            <span class="checkbox-text">Low</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_gap_risk" value="Medium">
                            <span class="checkbox-text">Medium</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_gap_risk" value="High">
                            <span class="checkbox-text">High</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Catalysts</label>
                    <div class="checkbox-group scoring-option-grid scoring-option-grid-2">
                        <label class="checkbox-label">
                            <input type="checkbox" name="d1_event_dividend">
                            <span class="checkbox-text">Company event: Dividends</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="d1_event_earnings">
                            <span class="checkbox-text">Company event: Earnings</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="d1_event_other_catalyst">
                            <span class="checkbox-text">Other scheduled catalyst</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="analysis-subsection">
            <h4>E. Levels &amp; Positioning</h4>
            <div class="scoring-stage-grid">
                <div class="form-group">
                    <label>Level position</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_level_position" value="Near support">
                            <span class="checkbox-text">Near support</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_level_position" value="Mid-range">
                            <span class="checkbox-text">Mid-range</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_level_position" value="Near resistance">
                            <span class="checkbox-text">Near resistance</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_level_position" value="Range break">
                            <span class="checkbox-text">Range break</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="d1_support">Support</label>
                    <input id="d1_support" name="d1_support" type="text" placeholder="Support detail">
                </div>
                <div class="form-group">
                    <label for="d1_resistance">Resistance</label>
                    <input id="d1_resistance" name="d1_resistance" type="text" placeholder="Resistance detail">
                </div>
                <div class="form-group">
                    <label>Candidate grade</label>
                    <div class="checkbox-group scoring-option-grid">
                        <label class="checkbox-label">
                            <input type="radio" name="d1_candidate_grade" value="A (aggressive swing candidate)">
                            <span class="checkbox-text">A (aggressive swing candidate)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_candidate_grade" value="B (selective)">
                            <span class="checkbox-text">B (selective)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="d1_candidate_grade" value="C (pass / observation)">
                            <span class="checkbox-text">C (pass / observation)</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="d1_note">Note</label>
                    <textarea id="d1_note" name="d1_note" rows="3" placeholder="1-2 lines max"></textarea>
                </div>
            </div>
        </div>

        <div class="analysis-subsection">
            <h4>Stock 1D Score</h4>
            <div class="scoring-stage-grid">
                <div class="form-group">
                    <label>TOTAL SCORE</label>
                    <div id="stock1d-total-score">0 / 20</div>
                </div>
                <div class="form-group">
                    <label>Grade</label>
                    <div id="stock1d-grade">Pass / observation</div>
                </div>
                <div class="form-group">
                    <label>RAW SCORE (before caps)</label>
                    <div id="stock1d-raw-score">0 / 20</div>
                </div>
                <div class="form-group">
                    <label>Breakdown</label>
                    <div id="stock1d-breakdown">A: 0/4 | B: 0/6 | C: 0/6 | D: 0/4 | Penalties: 0</div>
                </div>
            </div>
            <div class="form-group">
                <div id="stock1d-cap-note"></div>
            </div>
        </div>
    </div>

    <div class="analysis-section">
        <h3>Score Result</h3>
        <div class="form-group">
            <label>RAW SCORE (before caps)</label>
            <div id="scoring-raw-score">0 / 25</div>
        </div>
        <div class="form-group">
            <label>Section Scores</label>
            <div id="scoring-breakdown">
                Direction: 0/5 | Strength: 0/8 | Volatility Regime: 0/6 | Location: 0/6
            </div>
            <div id="pen-vol-subtotal">Volatility penalties subtotal: 0</div>
        </div>
        <div class="form-group">
            <div id="scoring-cap-note"></div>
        </div>
    </div>
</form>
{% endblock %}



