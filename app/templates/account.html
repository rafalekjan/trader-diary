{% extends "base.html" %}

{% block title %}Konto - Dziennik Tradera{% endblock %}

{% block content %}
<div class="page-header">
    <h2>ðŸ’° ZarzÄ…dzanie Kontem</h2>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <h3>Account Balance</h3>
        <div class="stat-value">${{ account.balance | format_decimal }}</div>
        <p class="stat-label">KapitaÅ‚ poczÄ…tkowy</p>
    </div>

    <div class="stat-card">
        <h3>Closed P&L</h3>
        <div class="stat-value {% if closed_pnl > 0 %}positive{% elif closed_pnl < 0 %}negative{% endif %}">
            ${{ closed_pnl | format_decimal }}
        </div>
        <p class="stat-label">Zrealizowany zysk/strata</p>
    </div>

    <div class="stat-card">
        <h3>Open P&L</h3>
        <div class="stat-value {% if open_pnl > 0 %}positive{% elif open_pnl < 0 %}negative{% endif %}">
            ${{ open_pnl | format_decimal }}
        </div>
        <p class="stat-label">Niezrealizowany zysk/strata</p>
    </div>

    <div class="stat-card highlight">
        <h3>Equity</h3>
        <div class="stat-value">${{ equity | format_decimal }}</div>
        <p class="stat-label">Balance + Closed P&L + Open P&L</p>
    </div>
</div>

<div class="card">
    <h3>Edytuj Balance</h3>
    <form method="POST" action="/account/update" class="account-form">
        <div class="form-group">
            <label for="balance">Nowy Balance *</label>
            <input type="number" name="balance" id="balance" value="{{ account.balance }}" step="0.01" required>
        </div>
        <button type="submit" class="btn btn-primary">ðŸ’¾ Zapisz Balance</button>
    </form>
    <p class="help-text">
        <strong>Uwaga:</strong> Balance to TwÃ³j kapitaÅ‚ poczÄ…tkowy. 
        Equity automatycznie uwzglÄ™dnia wszystkie zamkniÄ™te i otwarte trady.
        ZmieÅ„ balance tylko gdy wpÅ‚acasz/wypÅ‚acasz Å›rodki z konta.
    </p>
</div>

<div class="card">
    <h3>Informacje</h3>
    <p><strong>Ostatnia aktualizacja:</strong> {{ account.updated_at.strftime('%Y-%m-%d %H:%M:%S') }}</p>
    <p><strong>ID Konta:</strong> {{ account.id }}</p>
</div>
{% endblock %}
